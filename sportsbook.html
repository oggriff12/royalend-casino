<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>🏀 RoyalEnd Sportsbook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background-color: #0f0f1b;
      color: #fff;
    }
    header {
      text-align: center;
      padding: 30px;
      color: cyan;
      text-shadow: 0 0 10px cyan;
    }
    .balance, .notifications {
      text-align: center;
      margin-bottom: 10px;
      font-size: 16px;
      color: #00ffc3;
    }
    .section-wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 20px;
    }
    .games, .stream {
      flex: 1 1 450px;
      min-height: 450px;
      background: #1a1a2f;
      border: 2px solid #00ffc3;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 0 15px #00ffc3;
    }
    .games h2, .stream h2 {
      color: cyan;
      text-shadow: 0 0 8px cyan;
    }
    .game-card {
      background: #222;
      margin: 10px 0;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px #00ffc3;
    }
    .fallback {
      text-align: center;
      margin-top: 20px;
      color: #ccc;
      font-size: 18px;
    }
    iframe {
      width: 100%;
      height: 350px;
      border: none;
      border-radius: 10px;
    }
    .nav-footer {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 30px 0;
    }
    .nav-footer a {
      color: #00ffc3;
      text-decoration: none;
      font-weight: bold;
      font-size: 18px;
    }
  </style>
</head>
<body>

<header>
  <h1>🏀 RoyalEnd Sportsbook</h1>
  <p>Live worldwide games, odds, streams, and chats — bet virtual coins!</p>
</header>

<div class="balance">💰 Balance: <span id="walletBalance">$100.00</span></div>

<div class="notifications">📢 Upcoming Event: Bonus on NBA Finals bets this week!</div>

<div class="section-wrapper">
  <div class="games">
    <h2>📺 Live Basketball Games</h2>
    <div id="liveGamesGrid"></div>
    <div id="fallbackMessage" class="fallback" style="display:none;">No live games available. Check back soon!</div>
  </div>
  <div class="stream">
    <h2>🎥 Live Stream</h2>
    <iframe src="https://www.youtube.com/embed/2zYztZoPh-s?autoplay=1&mute=1&loop=1" allowfullscreen></iframe>
  </div>
</div>

<div class="nav-footer">
  <a href="index.html">🏠 Home</a>
  <a href="sportsbook.html">🏀 Sportsbook</a>
  <a href="leaderboard.html">🏆 Leaderboard</a>
</div>

<script>
  async function fetchLiveGames() {
    try {
      const res = await fetch('https://www.thesportsdb.com/api/v1/json/1/livescore.php?s=Basketball');
      const data = await res.json();
      return data.events || [];
    } catch (err) {
      console.error('Error fetching live games:', err);
      return [];
    }
  }

  async function renderLiveGames() {
    const grid = document.getElementById('liveGamesGrid');
    const fallback = document.getElementById('fallbackMessage');
    const games = await fetchLiveGames();

    if (!grid) return;

    if (games.length === 0) {
      grid.innerHTML = '';
      fallback.style.display = 'block';
      return;
    } else {
      fallback.style.display = 'none';
    }

    grid.innerHTML = games.map(game => `
      <div class="game-card">
        <h3>${game.strEvent}</h3>
        <p>🏆 League: ${game.strLeague}</p>
        <p>🕒 Time: ${game.strTime}</p>
        <p>📍 Venue: ${game.strVenue}</p>
      </div>
    `).join('');
  }

  renderLiveGames();
  setInterval(renderLiveGames, 20000);
</script>

</body>
</html>
